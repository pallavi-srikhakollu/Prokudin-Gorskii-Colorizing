function align2 = im_align2 ()for img=1:1:6  img_name = sprintf('image%d.jpg',img)FullImage=(imread(img_name));[height ,width]=size(FullImage);height= floor(height/3);%Divided the given image in three equal partsblue_image = FullImage(1:height,:);G=FullImage( height + 1:2*height,:);R =FullImage( 2*height + 1:3*height,:);%stores the shift for  x and direction for green channel Xg = 0  Yg = 0Xr = 0Yr = 0nccxr = 0;nccxg = 0;sizeH = size(blue_image, 2);sizeV = size(blue_image, 1);borderH = floor(.25 * sizeH);borderV = floor(.25 * sizeV);layer_Blue = blue_image(borderV:(sizeV-borderV), borderH:(sizeH-borderH));layer_Green = G(borderV:(sizeV-borderV), borderH:(sizeH-borderH));layer_Red = R(borderV:(sizeV-borderV), borderH:(sizeH-borderH)); nccr = normxcorr2(layer_Red,blue_image); nccg = normxcorr2(layer_Green,blue_image);    [y, x] = find(nccr==max(nccr(:)));    y = y-size(layer_Red,1);    x = x-size(layer_Red,2);     Yr = -(borderV - y);    Xr = -(borderH - x);        [y1, x1] = find(nccg==max(nccg(:)));    y1 = y1-size(layer_Green,1);    x1 = x1-size(layer_Green,2);     Yg = -(borderV - y1);    Xg = -(borderH - x1);disp("Displacement in x direction in red ")disp(Xr)disp("Displacement in y direction in red ")disp(Yr)disp("Displacement in x direction in green ")disp(Xg)disp("Displacement in y direction in green ")disp(Yg)    image = cat(3,circshift(R,[Yr Xr]),circshift(G,[Yg Xg]), blue_image);img_name = sprintf('image%d-ncc.jpg',img)imwrite(image,img_name)endforend